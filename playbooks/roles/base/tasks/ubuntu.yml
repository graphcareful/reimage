---

- name: Install base packages
  become: yes
  become_method: sudo
  apt:
    name: ['tmux', 'htop', 'zsh', 'socat', 'keychain', 'curl', 'build-essential', 'openssh-server']
    state: latest

- name: Install docker apt dependencies
  become: yes
  become_method: sudo
  apt:
    name: ['apt-transport-https', 'ca-certificates', 'software-properties-common']
    state: latest

- name: Add docker apt-key by ID
  become: yes
  become_method: sudo
  apt_key:
    url: https://download.docker.com/linux/ubuntu/gpg
    state: present

- name: Install docker repository [18.04]
  become: yes
  become_method: sudo
  apt_repository:
    repo: deb https://download.docker.com/linux/ubuntu bionic stable
    state: present
  when: ansible_distribution_version == "18.04"

- name: Install docker repository [16.04]
  become: yes
  become_method: sudo
  apt_repository:
    repo: deb https://download.docker.com/linux/ubuntu xenial stable
    state: present
  when: ansible_distribution_version == "16.04"

- name: Install docker
  become: yes
  become_method: sudo
  apt:
    update_cache: yes
    name: ['docker-ce']
    state: latest

